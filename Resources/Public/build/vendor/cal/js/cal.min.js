/**
 * Copyright (c) 2019 Open New Media GmbH
 * onm_cal - Javascript Calendar
 * @version v1.1.1
 * @author Open New Media GmbH
 */
!function(L){try{var z=moment().hours(0).minutes(0).seconds(0).milliseconds(0)}catch(e){throw"Can not find moment.js"}var e,o,q="ontouchstart"in window,U=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;L(window).resize(function(){e||(e=window.setTimeout(function(){e=null,L(window).trigger("onm.cal.resize")},133))});var l=function(e,t,a){if(!o){var n=L("<style/>",{type:"text/css"}).text("");L("head").append(n),o=n.get(0).sheet}"insertRule"in o?o.insertRule(e+"{"+t+"}",a):"addRule"in o&&o.addRule(e,t,a)},i={},W=function(e,t,a){var n,o=t.substr(1).toLowerCase();a&&(n=a.substr(1).toLowerCase());var r=e+"-"+o+(n?"-"+n:"");return i[r]||(i[r]=!0,l(".onm-cal .onm-cal-content > div.onm-cal-day-"+r,("bg"===e?"background-":"")+"color: #"+(n||o)+";"+(n?"background: linear-gradient(to right,#"+o+" 0%,#"+o+" 50%,#"+n+" 50%,#"+n+" 100%);":"")),"bg"===e?(o=s("#"+o,-30),n&&(n=s("#"+n,-30))):o="ffffff",l(".onm-cal .onm-cal-content > div.onm-cal-day-"+r+".onm-cal-day-selected",("bg"===e?"background-":"")+"color: #"+(n||o)+";"+(n?"background: linear-gradient(to right,#"+o+" 0%,#"+o+" 50%,#"+n+" 50%,#"+n+" 100%);":""))),"onm-cal-day-"+r},s=function(e,t){var a=parseInt(e.substring(1,3),16),n=parseInt(e.substring(3,5),16),o=parseInt(e.substring(5,7),16);return a=parseInt(a*(100+t)/100),n=(n=parseInt(n*(100+t)/100))<255?n:255,o=(o=parseInt(o*(100+t)/100))<255?o:255,(1==(a=a<255?a:255).toString(16).length?"0"+a.toString(16):a.toString(16))+(1==n.toString(16).length?"0"+n.toString(16):n.toString(16))+(1==o.toString(16).length?"0"+o.toString(16):o.toString(16))},t={init:function(B){B=L.extend({},L.fn.onmCal.defaults,B);return this.each(function(e){var l=this,i=L(l);if(!i.data("isOnmCal")){i.data("isOnmCal",!0);var s,o,r,c,n,d,g,m,u,p,t,f,h,y,v,D,a,x,M,T,w,b,Y,R=moment(z.locale(B.lang)),I=R.localeData(),S=function(){if(s="object"!=typeof B.position||!B.position.jquery||!B.position.get(e),c=s?1:Math.min(12,Math.max(1,parseInt(B.displayMonths))),g=[],m="INPUT"===i.get(0).nodeName.toUpperCase(),t=!1,f="object"==typeof B.rangeToElement&&B.rangeToElement.jquery&&B.rangeToElement.get(e),h=L(f?B.rangeToElement.get(e):[]),y=!!f&&"INPUT"===h.get(0).nodeName.toUpperCase(),a=!1,w=[],b=[],Y=[],l.dateIndex={},s&&!B.width&&(B.width="400px"),L([i,h]).each(function(){L(this).on("focus",function(e){e.preventDefault(),L(this).blur()})}),U&&parseInt(i.css("font-size"))<16&&L([i,h]).each(function(){L(this).css("font-size","16px")}),B.value&&(f?B.value[0]&&B.value[1]&&(t=A(B.value[0]),a=A(B.value[1])):t=A(B.value)),B.navigationPrev.click(function(){l.prevMonth()}),B.navigationNext.click(function(){l.nextMonth()}),L(B.dateRanges).each(function(){var e=A(this[0]),t=A(this[1]);Math.abs(e.diff(t,"days"))<B.minRange||(n=n?moment.min(n,e):e,d=d?moment.max(d,t):t,g.push([e,t]))}),j(R)||(R=n.clone()),"object"==typeof B.targetInput&&B.targetInput.jquery&&B.targetInput.get(e)?u=L(B.targetInput.get(e)):!1!==B.targetInput?(u=L("<input/>",{type:"hidden",name:"string"===B.targetInput?B.targetInput:i.attr("name")?i.attr("name"):i.attr("id")}),i.attr("onm-cal","2015"),i.after(u)):u=L([]),m?((B.placeholder&&!i.attr("placeholder")||"replace"===B.placeholder)&&i.attr("placeholder",I.longDateFormat(B.dateFormat)),!1===t&&i.val()&&((t=A(i.val())).isValid()&&j(t)?R=t.clone():(t=!1,l.selectDate(null))),i.change(function(){var e=A(i.val());if(e.isValid()&&j(e)){if(l.selectDate(null,"rangeTo"),l.selectDate(e),p){l.selectDate(p.clone().add(B.minRange,"days"),"rangeTo");var t=R.month()!==p.month();R=p.clone(),t&&O()}}else l.selectDate(null)})):!1===t&&i.text()&&((t=A(i.text())).isValid()&&j(t)?R=t.clone():(t=!1,l.selectDate(null))),f&&("object"==typeof B.rangeToInput&&B.rangeToInput.jquery&&B.rangeToInput.get(e)?v=L(B.rangeToInput.get(e)):!1!==B.rangeToInput?(v=L("<input/>",{type:"hidden",name:"string"===B.rangeToInput?B.rangeToInput:h.attr("name")?h.attr("name"):h.attr("id")}),h.after(v)):v=L([]),y?((B.placeholder&&!h.attr("placeholder")||"replace"===B.placeholder)&&h.attr("placeholder",I.longDateFormat(B.dateFormat)),!1===a&&h.val()&&((a=A(h.val())).isValid()&&j(a)?t||(R=a.clone()):(a=!1,l.selectDate(null,"rangeTo"))),h.change(function(){var e=A(h.val());if(e.isValid()&&j(e)){if(l.selectDate(e,"rangeTo"),D){var t=R.month()!==D.month();R=D.clone(),t&&O()}}else l.selectDate(null,"rangeTo")})):!1===a&&h.text()&&((a=A(h.text())).isValid()&&j(a)?t||(R=a.clone()):(a=!1,l.selectDate(null,"rangeTo")))),s)return i.add(h).on(m?"focus":"click",function(){l.popupShow(this)}),void l.resetValue(!0);x=L(B.position.get(e)),F(),l.resetValue(!0)},k=function(e){L(e.target).closest(".onm-cal").length||i.get(0)===e.target||h.get(0)===e.target||r&&r.get(0)===e.target||L(e.relatedTarget).closest(".onm-cal").length||i.get(0)===e.relatedTarget||h.get(0)===e.relatedTarget||r&&r.get(0)===e.relatedTarget||l.popupHide()},C=function(){if(x){var e=x.find(".onm-cal");if(300<e.width()?e.removeClass("onm-cal-small"):e.addClass("onm-cal-small"),"object"!=typeof B.position){var t,a,n=r.offset(),o=r.position();t=-1<B.position.indexOf("top")?o.top-x.outerHeight():o.top+r.outerHeight(),a=-1<B.position.indexOf("right")?o.left+r.outerWidth()-x.outerWidth():-1<B.position.indexOf("center")?o.left+(r.outerWidth()-x.outerWidth())/2:o.left,x.css({top:Math.max(o.top-n.top,t)+"px",left:Math.max(o.left-n.left,a)+"px"})}}},F=function(){for(var e=R.clone(),t=0;t<c;t++){var a=L("<div/>",{class:"onm-cal"});a.on("click",function(e){e.target&&!e.target.hasAttribute("disabled")&&(s&&e.preventDefault(),E(e))}),B.hideNavigation&&a.addClass("onm-cal-no-nav");var n=L("<span/>",{class:"onm-cal-month"}),o=L("<span/>",{class:"onm-cal-year"});a.append(L("<div/>",{class:"onm-cal-nav"}).append(0===t?M=L("<button/>",{type:"button",class:"onm-cal-prev"}):"",L("<h6/>").append(n," ",o),t===c-1?T=L("<button/>",{type:"button",class:"onm-cal-next"}):"")),a.append(L("<div/>",{class:"onm-cal-headline"}).append(L("<div/>",{class:"onm-cal-line-start onm-cal-day"+e.weekday(0).day()}).text(e.weekday(0).format("dd")),L("<div/>",{class:"onm-cal-day"+e.weekday(1).day()}).text(e.weekday(1).format("dd")),L("<div/>",{class:"onm-cal-day"+e.weekday(2).day()}).text(e.weekday(2).format("dd")),L("<div/>",{class:"onm-cal-day"+e.weekday(3).day()}).text(e.weekday(3).format("dd")),L("<div/>",{class:"onm-cal-day"+e.weekday(4).day()}).text(e.weekday(4).format("dd")),L("<div/>",{class:"onm-cal-day"+e.weekday(5).day()}).text(e.weekday(5).format("dd")),L("<div/>",{class:"onm-cal-day"+e.weekday(6).day()}).text(e.weekday(6).format("dd"))));var r=L("<div/>",{class:"onm-cal-content"});a.append(r),x.append(a),w.push(n.get(0)),b.push(o.get(0)),Y.push(r.get(0))}O(),L(window).on("onm.cal.resize",C),C(),i.trigger("onm.cal.created",x)},E=function(e){var t=L(e.target?e.target:e);if(t.hasClass("onm-cal-prev"))l.prevMonth();else if(t.hasClass("onm-cal-next"))l.nextMonth();else if(t.closest(".onm-cal-day-active").length){var a="target";f&&(!s||B.popupRangeSelect?a="auto":h.get(0)===o.get(0)&&(a="rangeTo")),l.selectDate(moment(t.closest(".onm-cal-day-active").data("date"),["YYYYMMDD"]).locale(B.lang),a),B.keepPopupOpen||B.popupRangeSelect&&!(B.popupRangeSelect&&f&&p&&D)||l.popupHide()}},j=function(e,t){if(t=t||"day",n&&e.isBefore(n,t))return!1;if(d&&e.isAfter(d,t))return!1;if("month"===t&&n&&d)return!0;if(!g.length)return!0;var a=!1;return L(g).each(function(){if(e.isBetween(this[0],this[1],t)||e.isSame(this[0],t)||e.isSame(this[1],t))return!(a=!0)}),a},V=function(e,t){if(!g.length)return!0;var a=!1;return L(g).each(function(){if((e.isBetween(this[0],this[1],"day")||e.isSame(this[0],"day")||e.isSame(this[1],"day"))&&(t.isBetween(this[0],this[1],"day")||t.isSame(this[0],"day")||t.isSame(this[1],"day")))return!(a=!0)}),a},P=function(e){if(!g.length&&!n)return!1;var t=!1;return L(g.length?g:[[n,d]]).each(function(){if(e.isBetween(this[0],this[1],"day")||e.isSame(this[0],"day")||e.isSame(this[1],"day"))return t=this,!1}),t},N=function(e){for(var t,a=e.clone().date(1).weekday(0),n=[],o=0;o<42;o++){if(t=L("<div/>",{class:o%7==0?"onm-cal-line-start":""}),e.month()===a.month()&&(t.append(L("<div/>").text(a.format("D"))),j(a))){var r=a.format("YYYYMMDD");t.addClass("onm-cal-day-active"),t.data("date",r),l.dateIndex[r]=t}n.push(t),a.add(1,"days")}return n},O=function(){var e;l.dateIndex={};for(var t=0;t<c;t++)e=R.clone().add(t,"months"),L(w[t]).text(e.format("MMMM")),L(b[t]).text(e.format("YYYY")),L(Y[t]).html(N(e)),0===t&&M.add(B.navigationPrev).prop("disabled",!j(e.clone().subtract(1,"months"),"month")),t===c-1&&T.add(B.navigationNext).prop("disabled",!j(e.clone().add(1,"months"),"month"));H(),i.trigger("onm.cal.monthChange",[R.clone().date(1),c])},A=function(e){var t;if("string"==typeof e){var a=I.longDateFormat("L"),n=I.longDateFormat("LL");t=moment(e,["YYYY-MM-DD",a,a.replace("MM","M").replace("DD","D"),a.replace("YYYY","YY"),a.replace("MM","M").replace("DD","D").replace("YYYY","YY"),n,n.replace("MMMM","MMM")])}else t="number"==typeof e?z.clone().add(e,"days"):moment(e).hours(0).minutes(0).seconds(0).milliseconds(0);return t.locale(B.lang)},H=function(){if(x&&(x.find(".onm-cal-day-selected").removeClass("onm-cal-day-selected onm-cal-day-selected-line onm-cal-day-selected-start onm-cal-day-selected-end"),p&&l.getDateElement(p).addClass("onm-cal-day-selected"+(f?" onm-cal-day-selected-start":"")),D&&l.getDateElement(D).addClass("onm-cal-day-selected"+(p?" onm-cal-day-selected-end":"")),p&&D))for(var e=p.clone().add(1,"days");1e3*e.year()+e.dayOfYear()<1e3*D.year()+D.dayOfYear();)l.getDateElement(e).addClass("onm-cal-day-selected onm-cal-day-selected-line"),e.add(1,"days")};l.resetValue=function(e){e?(f&&l.selectDate(null,"rangeTo"),l.selectDate(!1!==t?t.clone():null),f&&!1!==a&&l.selectDate(a.clone(),"rangeTo")):(l.selectDate(null),f&&l.selectDate(null,"rangeTo"))},l.update=function(e){B=L.extend(B,e),s?x&&x.remove():x.html(""),x=null,S()},l.popupHide=function(){s&&x&&!x.is(":hidden")&&(q&&o.prop("readonly",!1),x.hide(),L(window).off("click focusin",k),i.trigger("onm.cal.popupHidden"),i.blur())},l.popupShow=function(e,t,a){if(o=r=t&&f?h:L(e),a&&(r=L(a)),q){var n=o.prop("readonly");o.prop("readonly",!0),U&&!n&&(o.blur(),o.focus())}x?(x.show(),C()):(x=L("<div/>",{class:"onm-cal-popup"}).css({width:B.width}),i.after(x),F(),l.resetValue(!0)),i.trigger("onm.cal.popupShown"),L(window).on("click focusin",k)},l.prevMonth=function(){R.subtract(1,"months"),O()},l.nextMonth=function(){R.add(1,"months"),O()},l.selectDate=function(e,t){if(!1!==e){if(null===e||j(e)||(e=null),t=t||"target",f)if(s&&!B.popupRangeSelect)"rangeTo"!==t||!p||D||null===e||V(p,e)?"target"!==t||p||!D||null===e||V(e,D)||(l.selectDate(null,"rangeTo"),i.trigger("onm.cal.message",["clear","dateRange","rangeTo"])):(l.selectDate(null,"target"),i.trigger("onm.cal.message",["clear","dateRange","target"])),"rangeTo"===t&&p&&p.isAfter(e)?(l.selectDate(null,"target"),i.trigger("onm.cal.message",["clear","direction","target"])):"target"===t&&D&&D.isBefore(e)&&(l.selectDate(null,"rangeTo"),i.trigger("onm.cal.message",["clear","direction","rangeTo"])),0<B.minRange&&("rangeTo"===t&&p&&null!==e&&Math.abs(p.diff(e,"days"))<B.minRange?(l.selectDate(null,"target"),i.trigger("onm.cal.message",["clear","minRange","target"])):"target"===t&&D&&null!==e&&Math.abs(e.diff(D,"days"))<B.minRange&&(l.selectDate(null,"rangeTo"),i.trigger("onm.cal.message",["clear","minRange","rangeTo"]))),0<B.maxRange&&("rangeTo"===t&&p&&null!==e&&Math.abs(p.diff(e,"days"))>B.maxRange?(l.selectDate(null,"target"),i.trigger("onm.cal.message",["clear","maxRange","target"])):"target"===t&&D&&null!==e&&Math.abs(e.diff(D,"days"))>B.maxRange&&(l.selectDate(null,"rangeTo"),i.trigger("onm.cal.message",["clear","maxRange","rangeTo"])));else{if("auto"===t&&(t=p&&!D?"rangeTo":"target",p&&D))return l.selectDate(null,"rangeTo"),void l.selectDate(e);if("rangeTo"!==t||!p||D||null===e||V(p,e)?"target"!==t||p||!D||null===e||V(e,D)||(t="rangeTo",i.trigger("onm.cal.message",["adaptation","dateRange"])):(t="target",i.trigger("onm.cal.message",["adaptation","dateRange"])),"rangeTo"===t&&p&&p.isAfter(e)){var a=p.clone();return l.selectDate(e),l.selectDate(a,"rangeTo"),void i.trigger("onm.cal.message",["adaptation","switch"])}if("target"===t&&D&&D.isBefore(e)){a=D.clone();return l.selectDate(a),l.selectDate(e,"rangeTo"),void i.trigger("onm.cal.message",["adaptation","switch"])}if(0<B.minRange)if("rangeTo"===t&&p&&null!==e&&Math.abs(p.diff(e,"days"))<B.minRange){if(e=p.clone().add(B.minRange,"days"),!V(p,e))e=P(p)[1].clone(),l.selectDate(e.clone().subtract(B.minRange,"days"),"target");i.trigger("onm.cal.message",["restriction","minRange"])}else if("target"===t&&D&&null!==e&&Math.abs(e.diff(D,"days"))<B.minRange){if(e=D.clone().subtract(B.minRange,"days"),!V(e,D))e=P(D)[0].clone(),l.selectDate(e.clone().add(B.minRange,"days"),"rangeTo");i.trigger("onm.cal.message",["restriction","minRange"])}0<B.maxRange&&("rangeTo"===t&&p&&null!==e&&Math.abs(p.diff(e,"days"))>B.maxRange?(e=p.clone().add(B.maxRange,"days"),i.trigger("onm.cal.message",["restriction","maxRange"])):"target"===t&&D&&null!==e&&Math.abs(e.diff(D,"days"))>B.maxRange&&(e=D.clone().subtract(B.maxRange,"days"),i.trigger("onm.cal.message",["restriction","maxRange"])))}else t="target";var n;"rangeTo"!==t?(n=!(p===e||p&&p.isSame(e)),p=e,m?i.val(e?e.format(I.longDateFormat(B.dateFormat)):""):i.text(e?e.format(I.longDateFormat(B.dateFormat)):""),u.val(e?e.format("YYYY-MM-DD"):""),n&&i.trigger("onm.cal.change",[p])):(n=!(D===e||D&&D.isSame(e)),D=e,y?h.val(e?e.format(I.longDateFormat(B.dateFormat)):""):h.text(e?e.format(I.longDateFormat(B.dateFormat)):""),v.val(e?e.format("YYYY-MM-DD"):""),n&&h.trigger("onm.cal.change",[D])),H()}},l.setDate=function(e,t){l.selectDate(A(e),!0===t?"rangeTo":"target")},l.getDateElement=function(e){var t,a="string"==typeof(t=e)?t.replace(/[^0-9]+/g,""):"number"==typeof t?z.clone().add(t,"days").format("YYYYMMDD"):"object"==typeof t&&(moment.isDate(t)&&(t=moment(t)),moment.isMoment(t))?t.format("YYYYMMDD"):"";return l.dateIndex[a]?l.dateIndex[a]:L([])},l.setDateElementColors=function(e,t,a,n){var o="",r=l.getDateElement(e);r.removeClass(function(e,t){return(t.match(/(^|\s)onm-cal-day-(bg|font)\S+/g)||[]).join(" ")}),"string"==typeof t&&t.match(/^#[0-9A-Fa-f]{6}$/)&&(n?(l.getDateElement(A(e).add(1,"days")).data("split-color",t),r.data("split-color")?o+=W("bg",r.data("split-color"),t)+" ":o+=W("bg",t)+" "):o+=W("bg",t)+" "),"string"==typeof a&&a.match(/^#[0-9A-Fa-f]{6}$/)&&(o+=W("font",a)+" "),o&&r.addClass(o)},l.getDateIndex=function(){return l.dateIndex},S()}})},getDateElement:function(t){var a=[];return this.each(function(){var e=this.getDateElement(t);e.length&&a.push(e.get(0))}),L(a)},setDate:function(e,t){return this.each(function(){this.setDate(e,t)})},setDateElementColors:function(e,t,a,n){return this.each(function(){this.setDateElementColors(e,t,a,n)})},getDateIndex:function(){var e;return this.each(function(){e=this.getDateIndex()}),e},popupShow:function(e,t){return this.each(function(){this.popupShow(this,e,t)})},popupHide:function(){return this.each(function(){this.popupHide()})},resetValue:function(e){return this.each(function(){this.resetValue(e)})},update:function(e){return this.each(function(){this.update(e)})}};L.fn.onmCal=function(e){if(!this.length)return this;if(t[e])return t[e].apply(this,Array.prototype.slice.call(arguments,1));if("object"!=typeof e&&e)throw'Method "'+e+'" not exists in onmCal';return t.init.apply(this,arguments)},L.fn.onmCal.defaults={lang:L("html").attr("lang")||"en",dateFormat:"L",targetInput:!0,position:"",placeholder:!0,displayMonths:1,rangeToElement:!1,rangeToInput:!0,hideNavigation:!1,value:!1,navigationPrev:L([]),navigationNext:L([]),popupRangeSelect:!1,minRange:0,maxRange:0,dateRanges:[],width:"",keepPopupOpen:!1}}(jQuery);
//# sourceMappingURL=maps/cal.min.js.map
